<!--
  ì•„ì„ì›¹ í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì—°ë™ ì½”ë“œ
  
  ì‚¬ìš© ë°©ë²•:
  1. ì•„ë˜ ì½”ë“œì—ì„œ YOUR_BOT_TOKENê³¼ YOUR_CHAT_IDë¥¼ ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.
  2. ì•„ì„ì›¹ ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ê³ ê¸‰ ì„¤ì • â†’ HTML/CSS/JS ì„¹ì…˜ì— ì´ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.
  3. í¼ ì œì¶œ ì‹œ í…”ë ˆê·¸ë¨ìœ¼ë¡œ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.
-->

<script>
(function() {
  'use strict';
  
  // ============================================
  // ì„¤ì •: ì—¬ê¸°ì— ë´‡ í† í°ê³¼ Chat IDë¥¼ ì…ë ¥í•˜ì„¸ìš”
  // ============================================
  const TELEGRAM_BOT_TOKEN = 'YOUR_BOT_TOKEN'; // ì˜ˆ: '1234567890:ABCdefGHIjklMNOpqrsTUVwxyz'
  const TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID';     // ì˜ˆ: '123456789'
  
  // ============================================
  // í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
  // ============================================
  async function sendTelegramNotification(message) {
    if (TELEGRAM_BOT_TOKEN === 'YOUR_BOT_TOKEN' || TELEGRAM_CHAT_ID === 'YOUR_CHAT_ID') {
      console.warn('í…”ë ˆê·¸ë¨ ë´‡ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.');
      return false;
    }
    
    try {
      const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          chat_id: TELEGRAM_CHAT_ID,
          text: message,
          parse_mode: 'HTML',
        }),
      });
      
      if (!response.ok) {
        throw new Error('í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ ì‹¤íŒ¨');
      }
      
      return true;
    } catch (error) {
      console.error('í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ ì‹¤íŒ¨:', error);
      return false;
    }
  }
  
  // ============================================
  // í¼ ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜
  // ============================================
  function collectFormData(form) {
    const formData = new FormData(form);
    const data = {};
    
    // ëª¨ë“  ì…ë ¥ í•„ë“œ ìˆ˜ì§‘
    form.querySelectorAll('input, textarea, select').forEach((field) => {
      const name = field.name || field.id;
      const value = field.value;
      
      if (name && value) {
        // ë¼ë””ì˜¤ ë²„íŠ¼ê³¼ ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬
        if (field.type === 'radio' || field.type === 'checkbox') {
          if (field.checked) {
            data[name] = data[name] ? `${data[name]}, ${value}` : value;
          }
        } else {
          data[name] = value;
        }
      }
    });
    
    return data;
  }
  
  // ============================================
  // ë©”ì‹œì§€ í¬ë§·íŒ… í•¨ìˆ˜
  // ============================================
  function formatMessage(formData, formType = 'ë¬¸ì˜') {
    let message = `ğŸ“§ <b>ì•„ì„ì›¹ ${formType}</b>\n\n`;
    
    // í•„ë“œëª…ì„ í•œê¸€ë¡œ ë§¤í•‘ (í•„ìš”ì— ë”°ë¼ ìˆ˜ì •)
    const fieldLabels = {
      name: 'ì´ë¦„',
      company: 'íšŒì‚¬ëª…',
      phone: 'ì „í™”ë²ˆí˜¸',
      email: 'ì´ë©”ì¼',
      message: 'ë¬¸ì˜ë‚´ìš©',
      inquiry: 'ë¬¸ì˜ë‚´ìš©',
      subject: 'ì œëª©',
      // ì¶”ê°€ í•„ë“œëª… ë§¤í•‘...
    };
    
    for (const [key, value] of Object.entries(formData)) {
      if (value) {
        const label = fieldLabels[key] || key;
        message += `<b>${label}:</b> ${value}\n`;
      }
    }
    
    message += `\nğŸ• ë¬¸ì˜ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}`;
    message += `\nğŸŒ ì¶œì²˜: ì•„ì„ì›¹ ë©”ì¸ í™ˆí˜ì´ì§€`;
    
    return message;
  }
  
  // ============================================
  // í¼ ì œì¶œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  // ============================================
  function setupFormListener() {
    // í˜ì´ì§€ì˜ ëª¨ë“  í¼ì— ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    const forms = document.querySelectorAll('form');
    
    forms.forEach((form) => {
      form.addEventListener('submit', async function(e) {
        // ê¸°ë³¸ ì œì¶œ ë™ì‘ì€ ìœ ì§€ (í…”ë ˆê·¸ë¨ ì „ì†¡ ì‹¤íŒ¨í•´ë„ í¼ì€ ì œì¶œë¨)
        
        // í¼ ë°ì´í„° ìˆ˜ì§‘
        const formData = collectFormData(form);
        
        // ë©”ì‹œì§€ ìƒì„±
        const message = formatMessage(formData);
        
        // í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ (ë¹„ë™ê¸°, ì—ëŸ¬ê°€ ë‚˜ë„ í¼ ì œì¶œì€ ê³„ì†ë¨)
        sendTelegramNotification(message).catch((error) => {
          console.error('í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ ì‹¤íŒ¨:', error);
        });
      });
    });
  }
  
  // ============================================
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
  // ============================================
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setupFormListener);
  } else {
    setupFormListener();
  }
  
  // ì•„ì„ì›¹ì˜ ë™ì  í¼ ë¡œë“œë¥¼ ìœ„í•œ MutationObserver
  const observer = new MutationObserver(() => {
    setupFormListener();
  });
  
  observer.observe(document.body, {
    childList: true,
    subtree: true,
  });
})();
</script>

<!--
  ì¶”ê°€ ì„¤ì •:
  
  1. íŠ¹ì • í¼ë§Œ ì„ íƒí•˜ë ¤ë©´:
     const forms = document.querySelectorAll('form#contact-form');
     ë˜ëŠ”
     const forms = document.querySelectorAll('.inquiry-form');
  
  2. í¼ ì œì¶œ ì „ì— í™•ì¸í•˜ë ¤ë©´:
     form.addEventListener('submit', async function(e) {
       e.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë§‰ê¸°
       
       // í…”ë ˆê·¸ë¨ ì „ì†¡
       const success = await sendTelegramNotification(message);
       
       if (success) {
         form.submit(); // ì„±ê³µ ì‹œ í¼ ì œì¶œ
       } else {
         alert('ì•Œë¦¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
       }
     });
  
  3. ì´ë¯¸ì§€ë‚˜ íŒŒì¼ì´ í¬í•¨ëœ ê²½ìš°:
     - í…”ë ˆê·¸ë¨ sendPhoto APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
     - ìì„¸í•œ ë‚´ìš©ì€ TELEGRAM_SETUP.mdë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
-->

